import{b7 as C,a1 as k,o as i,c as l,w as o,aC as w,j as d,K as $,A as V,E as b,G as p,a as g,F as m,e as y,H as h,I as A,b8 as _,b as c,V as B,g as u,k as D,n as j,q as L,s as M,t as v,aw as S}from"./index.0bd43ae6.js";import{M as z}from"./ModuleContainer.627ff36f.js";import{V as F}from"./VAlert.dbb0530d.js";import"./Window.29575377.js";const I={class:"d-flex flex-wrap justify-center"},N={class:"d-flex flex-no-wrap justify-space-between align-center"},T={class:"flex-grow-1 d-flex flex-column"},E=["textContent"],P=["textContent"],q={name:C.id,data:()=>({categories:[],lang:null,id_category:null,loading:!1,error:null}),computed:{albums(){var s;return this.categories?this.id_category?(s=this.categories.filter(a=>a.id_category==this.id_category)[0])==null?void 0:s.albums.sort((a,r)=>a.order-r.order):[...new Map(this.categories.reduce((a,r)=>a.concat(r.albums),[]).map(a=>[a.id_album,{...a,subtitle:null}])).values()].sort((a,r)=>this.$string.sort(a.name,r.name)):[]},compact:function(){return this.$vuetify.display.width<=600}},methods:{async loadData(){if(this.id_category=null,this.categories=[],this.loading=!0,this.categories=await this.$database.get(`${this.$i18n.locale}_categories`),this.categories==null){this.$modules.close(this.module_id);return}this.categories.length>0?(this.categories.sort((s,a)=>s.order-a.order),this.id_category=this.categories[0].id_category):this.id_category=0,this.lang=this.$i18n.locale,this.loading=!1},setCategory(s=null){this.id_category=s},openAlbum(s){this.$media.openAlbum(s)},async show(s){s&&this.lang!=this.$i18n.locale?await this.loadData():s&&this.categories.length>0&&this.id_category==null&&(this.id_category=this.categories[0].id_category)},close(){this.id_category=null}},async mounted(){await this.loadData()}},O=Object.assign(q,{setup(s){const a=k(null),r=e=>{var n;return((n=a.value)==null?void 0:n.t(e))||e};return(e,n)=>(i(),l(z,{ref_key:"moduleContainer",ref:a,manifest:S(C),onShow:e.show,onClose:e.close},{header:o(()=>[e.compact?(i(),l(w,{key:0,color:"transparent"},{prepend:o(()=>[d($,null,{activator:o(({props:t})=>[d(V,b({icon:"$menu"},t),null,16)]),default:o(()=>[d(p,{color:e.$theme.primary(),class:"d-flex flex-column h-100"},{default:o(()=>[(i(!0),g(m,null,y(e.categories,t=>(i(),l(h,{key:t.id_category,title:t.name,active:e.id_category==t.id_category,onClick:f=>e.setCategory(t.id_category)},null,8,["title","active","onClick"]))),128)),d(A),d(h,{class:"mt-auto",title:r("all_collections"),active:e.id_category==0,onClick:n[0]||(n[0]=t=>e.setCategory(0))},null,8,["title","active"])]),_:1},8,["color"])]),_:1})]),default:o(()=>[!e.id_category||e.id_category==0?(i(),l(_,{key:0,class:"text-h6",text:r("all_collections")},null,8,["text"])):(i(),l(_,{key:1,class:"text-h6",text:e.categories.find(t=>t.id_category==e.id_category).name},null,8,["text"]))]),_:1})):c("",!0)]),left:o(()=>[e.compact?c("",!0):(i(),l(p,{key:0,color:e.$theme.primary(),width:200,class:"d-flex flex-column h-100"},{default:o(()=>[e.loading?(i(),l(B,{key:0,color:e.$theme.primary(),indeterminate:""},null,8,["color"])):c("",!0),(i(!0),g(m,null,y(e.categories,t=>(i(),l(h,{key:t.id_category,title:t.name,active:e.id_category==t.id_category,onClick:f=>e.setCategory(t.id_category)},null,8,["title","active","onClick"]))),128)),d(h,{class:"mt-auto",title:r("all_collections"),active:e.id_category==0,onClick:n[1]||(n[1]=t=>e.setCategory(0))},null,8,["title","active"])]),_:1},8,["color"]))]),default:o(()=>[e.error?(i(),l(F,{key:0,type:"error",text:e.error,variant:"tonal",border:"start",class:"ma-2"},null,8,["text"])):c("",!0),u("div",I,[(i(!0),g(m,null,y(e.albums,t=>(i(),l(D,{style:j(e.$vuetify.display.width>350?"min-width: 300px; max-width: 300px":"width:100%"),theme:"dark",key:t.id_album,width:"320",class:"ma-2",color:t.color||"#385F73",dark:"",onClick:f=>e.openAlbum(t.id_album)},{default:o(()=>[u("div",N,[t.url_image?(i(),l(L,{key:0,class:"ma-3",size:e.$vuetify.display.width>350?125:75,tile:"",rounded:"0"},{default:o(()=>[d(M,{src:e.$path.file(t.url_image)},null,8,["src"])]),_:2},1032,["size"])):c("",!0),u("div",T,[u("div",{class:"text-h6 pt-2",textContent:v(t.name)},null,8,E),u("div",{class:"h6",textContent:v(t.subtitle)},null,8,P)])])]),_:2},1032,["style","color","onClick"]))),128))])]),_:1},8,["manifest","onShow","onClose"]))}});export{O as default};
