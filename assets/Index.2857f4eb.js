import{_ as C,bz as M,r as m,o as a,a as c,j as r,w as s,b as u,T as B,d as U,c as n,K as E,A as F,E as y,k as S,B as N,bA as k,g as x,n as W,G as j,F as A,e as R,H as q,aq as D,y as z,t as T,J as G,V as J}from"./index.0bd43ae6.js";import{L as K}from"./Window.29575377.js";import{L as O}from"./Slide.f8fabf4d.js";import{V as L}from"./VSwitch.42dd4b4b.js";import"./VInput.95ec174b.js";import"./VSelectionControl.407bfb1b.js";const Q={name:"FullscreenPlayerComponent",components:{LPlayer:M},data(){return{visible:!1,start_timer:!0,timeout:null}},methods:{mouseMove(){!this.start_timer||(this.showChild(),this.startHideTimer())},mouseEnter(){this.start_timer=!1,clearTimeout(this.timeout)},mouseLeave(){this.start_timer=!0,this.startHideTimer()},showChild(){this.visible=!0,clearTimeout(this.timeout)},startHideTimer(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.visible=!1},1e3)}},beforeUnmount(){clearTimeout(this.timeout)}};function X(t,l,f,g,_,e){const h=m("l-player");return a(),c("div",{class:"position-absolute w-100 h-100 top-0 left-0",style:{"z-index":"9999"},onMousemove:l[2]||(l[2]=(...d)=>e.mouseMove&&e.mouseMove(...d))},[r(B,{name:"slide-up"},{default:s(()=>[_.visible?(a(),c("div",{key:0,class:"position-absolute w-100 bottom-0",onMouseenter:l[0]||(l[0]=(...d)=>e.mouseEnter&&e.mouseEnter(...d)),onMouseleave:l[1]||(l[1]=(...d)=>e.mouseLeave&&e.mouseLeave(...d))},[r(h,{location:"fullscreen"})],32)):u("",!0)]),_:1})],32)}const Y=C(Q,[["render",X],["__scopeId","data-v-71034165"]]),Z={name:"MediaComponent",components:{Window:K,LSlide:O,LPlayer:M,LFullscreenPlayer:Y},data:()=>({preview_height:0,scrollPos:0}),computed:{module_id(){return U.id},module(){return this.$modules.get(this.module_id)},is_online(){return this.$appdata.get("is_online")},loading(){return this.module.loading},config(){return this.$media.config()},slide_index(){var t;return(t=this.config)==null?void 0:t.slide_index},slides(){return this.$media.slides()},slide(){return this.$media.slide()},fullscreen:{get(){return this.module.config.fullscreen},set(t){this.$media.fullscreen(t)}},lazy_load:{get(){return this.$userdata.get("modules.media.lazy_load")},set(t){this.$userdata.set("modules.media.lazy_load",t)}},fade_audio:{get(){return this.$userdata.get("modules.media.fade_audio")},set(t){this.$userdata.set("modules.media.fade_audio",t)}}},watch:{slide_index(){var t,l,f;if(!!this.module.show&&((t=this.$refs)==null?void 0:t.slideItem)&&((f=(l=this.$refs)==null?void 0:l.slideItem[0])==null?void 0:f.$el)){let g=this,_=this.$refs.slideItem[0].$el.offsetHeight;setTimeout(function(){g.scrollPos=g.slide_index*_-_},100)}}},methods:{t(t){return this.$t(`modules.${this.module_id}.${t}`)},resize(t){this.preview_height=t.container_height}}},$={class:"d-flex flex-no-wrap align-stretch flex-row justify-space-between"},ee={class:"w-100"},te={key:0},le=["innerHTML"],ie=["src"];function se(t,l,f,g,_,e){var v,p,V,w;const h=m("l-slide"),d=m("l-fullscreen-player"),P=m("fullscreen"),I=m("l-player"),H=m("Window");return a(),n(H,{modelValue:e.module.show,"onUpdate:modelValue":l[4]||(l[4]=i=>e.module.show=i),title:(v=e.config)==null?void 0:v.title,subtitle:((p=e.config)==null?void 0:p.subtitle)+(((V=e.config)==null?void 0:V.track)>0?" | "+e.t("general.track")+" "+e.config.track:""),image:(w=e.config)!=null&&w.image?t.$path.file(e.config.image):"","title-class":"text-h4 font-weight-light",closable:"",minimizable:"",compact:"",compact_footer:"",onClose:l[5]||(l[5]=i=>t.$media.close()),onMinimize:l[6]||(l[6]=i=>t.$media.minimize()),onResize:e.resize,size:"large",scrollPos:t.scrollPos,dark:""},{system_buttons:s(()=>[e.is_online?(a(),n(E,{key:0},{activator:s(({props:i})=>[r(F,y(i,{class:"ms-2",icon:"mdi-menu",variant:"text",size:"small"}),null,16)]),default:s(()=>[r(S,null,{default:s(()=>[r(N,null,{default:s(()=>[r(k,{text:e.t("inputs.lazy_load_tooltip")},{activator:s(({props:i})=>[r(L,y({color:"blue"},i,{modelValue:e.lazy_load,"onUpdate:modelValue":l[0]||(l[0]=o=>e.lazy_load=o),label:e.t("inputs.lazy_load")}),null,16,["modelValue","label"])]),_:1},8,["text"]),r(k,{text:e.t("inputs.fade_audio_tooltip")},{activator:s(({props:i})=>[r(L,y({color:"blue"},i,{modelValue:e.fade_audio,"onUpdate:modelValue":l[1]||(l[1]=o=>e.fade_audio=o),label:e.t("inputs.fade_audio")}),null,16,["modelValue","label"])]),_:1},8,["text"])]),_:1})]),_:1})]),_:1})):u("",!0)]),footer:s(()=>[r(I,{location:"window"})]),default:s(()=>[x("div",$,[x("div",ee,[r(P,{modelValue:e.fullscreen,"onUpdate:modelValue":l[2]||(l[2]=i=>e.fullscreen=i),class:"position-sticky w-100",style:W(`top: 0; height:${t.preview_height}px; overflow: hidden;`)},{default:s(()=>[e.slide?(a(),n(h,{key:0,slide_number:e.config.slide_index,cover:e.slide.cover==!0,text:e.slide.lyric,aux_text:e.slide.aux_lyric,image:e.slide.url_image?t.$path.file(e.slide.url_image):null,image_position:e.slide.image_position},null,8,["slide_number","cover","text","aux_text","image","image_position"])):u("",!0),e.fullscreen?(a(),n(d,{key:1})):u("",!0)]),_:1},8,["modelValue","style"])]),t.$vuetify.display.width>600?(a(),c("div",te,[r(j,{class:"overflow h-100 ma-0 pa-0","bg-color":"black",width:250},{default:s(()=>[(a(!0),c(A,null,R(e.slides,(i,o)=>(a(),n(q,{onClick:b=>t.$media.goToSlide(o),key:o,link:"",active:e.config.slide_index===o,ref_for:!0,ref:"slideItem",variant:"tonal",height:58},{prepend:s(()=>[r(D,{class:"mr-2"},{default:s(()=>[z(T(o+1),1)]),_:2},1024)]),default:s(()=>[i.cover?(a(),n(G,{key:0},{default:s(()=>[z(T(i.lyric),1)]),_:2},1024)):(a(),c("div",{key:1,class:"text-caption text-truncate",innerHTML:i.lyric},null,8,le)),e.config.audio!=""&&e.config.slide_index==o?(a(),n(J,{key:2,modelValue:e.config.slide_progress,"onUpdate:modelValue":l[3]||(l[3]=b=>e.config.slide_progress=b),indeterminate:e.loading,height:5,color:e.config.is_paused?"orange":"white"},null,8,["modelValue","indeterminate","color"])):u("",!0),i.url_image?(a(),c("img",{key:3,src:t.$path.file(i.url_image),style:{display:"none"}},null,8,ie)):u("",!0)]),_:2},1032,["onClick","active"]))),128))]),_:1})])):u("",!0)])]),_:1},8,["modelValue","title","subtitle","image","onResize","scrollPos"])}const me=C(Z,[["render",se]]);export{me as default};
