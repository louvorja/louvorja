import{L as de,M as tl,Q as Le,X as al,Y as Z,U as Oe,j as s,F as N,E as Q,Z as kl,$ as U,a0 as je,a1 as ee,a2 as R,a3 as il,a4 as Ee,a5 as wl,a6 as Vl,a7 as Fe,a8 as Pe,a9 as Sl,aa as xl,ab as Cl,ac as Il,ad as Dl,W as Se,ae as Fl,af as Pl,ag as Tl,ah as Al,ai as nl,aj as sl,ak as Ml,al as ol,am as ye,an as rl,ao as De,K as ul,G as qe,H as ke,q as cl,p as Te,ap as dl,aq as We,ar as vl,y as he,as as fl,at as Ae,au as Me,av as Be,aw as ge,ax as Bl,ay as Rl,az as Ll,_ as Ol,aA as El,m as Kl,r as Ke,aB as $l,o as q,c as xe,w as W,a as le,x as zl,t as pe,g as te,n as Ce,e as _e,f as fe,v as $e,k as Je,u as el,B as Ul,b as ll,aC as Hl,aD as Nl,I as ze,A as Ue}from"./index.0bd43ae6.js";import{L as jl}from"./Window.29575377.js";import{S as ql}from"./Screen.799cdb54.js";import{m as hl,V as Re}from"./VTextField.a62d9ad0.js";import{u as bl}from"./VInput.95ec174b.js";import{V as ml}from"./VCheckboxBtn.14a3f195.js";import{V as He}from"./VSkeletonLoader.d4bc4e4b.js";import"./VSelectionControl.407bfb1b.js";const Wl=de({renderless:Boolean,...tl()},"VVirtualScrollItem"),Ql=Le()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Wl(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:l,emit:o,slots:i}=t;const{resizeRef:a,contentRect:b}=al(void 0,"border");Z(()=>{var f;return(f=b.value)==null?void 0:f.height},f=>{f!=null&&o("update:height",f)}),Oe(()=>{var f,c;return e.renderless?s(N,null,[(f=i.default)==null?void 0:f.call(i,{itemRef:a})]):s("div",Q({ref:a,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(c=i.default)==null?void 0:c.call(i)])})}}),Xl=-1,Yl=1,Ne=100,Gl=de({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function Zl(e,t){const l=kl(),o=U(0);je(()=>{o.value=parseFloat(e.itemHeight||0)});const i=U(0),a=U(Math.ceil((parseInt(e.height)||l.height.value)/(o.value||16))||1),b=U(0),f=U(0),c=ee(),_=ee();let v=0;const{resizeRef:h,contentRect:u}=al();je(()=>{h.value=c.value});const w=R(()=>{var r;return c.value===document.documentElement?l.height.value:((r=u.value)==null?void 0:r.height)||parseInt(e.height)||0}),E=R(()=>!!(c.value&&_.value&&w.value&&o.value));let x=Array.from({length:t.value.length}),S=Array.from({length:t.value.length});const F=U(0);let O=-1;function H(r){return x[r]||o.value}const y=Vl(()=>{const r=performance.now();S[0]=0;const m=t.value.length;for(let A=1;A<=m-1;A++)S[A]=(S[A-1]||0)+H(A-1);F.value=Math.max(F.value,performance.now()-r)},F),g=Z(E,r=>{!r||(g(),v=_.value.offsetTop,y.immediate(),j(),~O&&Fe(()=>{Pe&&window.requestAnimationFrame(()=>{ve(O),O=-1})}))});il(()=>{y.clear()});function be(r,m){const A=x[r],M=o.value;o.value=M?Math.min(o.value,m):m,(A!==m||M!==o.value)&&(x[r]=m,y())}function L(r){return r=Ee(r,0,t.value.length-1),S[r]||0}function ae(r){return Jl(S,r)}let ie=0,K=0,J=0;Z(w,(r,m)=>{m&&(j(),r<m&&requestAnimationFrame(()=>{K=0,j()}))});let X=-1;function ne(){if(!c.value||!_.value)return;const r=c.value.scrollTop,m=performance.now();m-J>500?(K=Math.sign(r-ie),v=_.value.offsetTop):K=r-ie,ie=r,J=m,window.clearTimeout(X),X=window.setTimeout(se,500),j()}function se(){!c.value||!_.value||(K=0,J=0,window.clearTimeout(X),j())}let oe=-1;function j(){cancelAnimationFrame(oe),oe=requestAnimationFrame(me)}function me(){if(!c.value||!w.value)return;const r=ie-v,m=Math.sign(K),A=Math.max(0,r-Ne),M=Ee(ae(A),0,t.value.length),C=r+w.value+Ne,P=Ee(ae(C)+1,M+1,t.value.length);if((m!==Xl||M<i.value)&&(m!==Yl||P>a.value)){const $=L(i.value)-L(M),Y=L(P)-L(a.value);Math.max($,Y)>Ne?(i.value=M,a.value=P):(M<=0&&(i.value=M),P>=t.value.length&&(a.value=P))}b.value=L(i.value),f.value=L(t.value.length)-L(a.value)}function ve(r){const m=L(r);!c.value||r&&!m?O=r:c.value.scrollTop=m}const d=R(()=>t.value.slice(i.value,a.value).map((r,m)=>({raw:r,index:m+i.value,key:wl(r)&&"value"in r?r.value:m+i.value})));return Z(t,()=>{x=Array.from({length:t.value.length}),S=Array.from({length:t.value.length}),y.immediate(),j()},{deep:!0}),{calculateVisibleItems:j,containerRef:c,markerRef:_,computedItems:d,paddingTop:b,paddingBottom:f,scrollToIndex:ve,handleScroll:ne,handleScrollend:se,handleItemResize:be}}function Jl(e,t){let l=e.length-1,o=0,i=0,a=null,b=-1;if(e[l]<t)return l;for(;o<=l;)if(i=o+l>>1,a=e[i],a>t)l=i-1;else if(a<t)b=i,o=i+1;else return a===t?i:o;return b}const et=de({items:{type:Array,default:()=>[]},renderless:Boolean,...Gl(),...tl(),...Sl()},"VVirtualScroll"),gl=Le()({name:"VVirtualScroll",props:et(),setup(e,t){let{slots:l}=t;const o=xl("VVirtualScroll"),{dimensionStyles:i}=Cl(e),{calculateVisibleItems:a,containerRef:b,markerRef:f,handleScroll:c,handleScrollend:_,handleItemResize:v,scrollToIndex:h,paddingTop:u,paddingBottom:w,computedItems:E}=Zl(e,Il(e,"items"));return Dl(()=>e.renderless,()=>{function x(){var O,H;const F=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";b.value===document.documentElement?(document[F]("scroll",c,{passive:!0}),document[F]("scrollend",_)):((O=b.value)==null||O[F]("scroll",c,{passive:!0}),(H=b.value)==null||H[F]("scrollend",_))}Fl(()=>{b.value=Pl(o.vnode.el,!0),x(!0)}),il(x)}),Oe(()=>{const x=E.value.map(S=>s(Ql,{key:S.key,renderless:e.renderless,"onUpdate:height":F=>v(S.index,F)},{default:F=>{var O;return(O=l.default)==null?void 0:O.call(l,{item:S.raw,index:S.index,...F})}}));return e.renderless?s(N,null,[s("div",{ref:f,class:"v-virtual-scroll__spacer",style:{paddingTop:Se(u.value)}},null),x,s("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Se(w.value)}},null)]):s("div",{ref:b,class:["v-virtual-scroll",e.class],onScrollPassive:c,onScrollend:_,style:[i.value,e.style]},[s("div",{ref:f,class:"v-virtual-scroll__container",style:{paddingTop:Se(u.value),paddingBottom:Se(w.value)}},[x])])}),{calculateVisibleItems:a,scrollToIndex:h}}});function pl(e,t){const l=U(!1);let o;function i(f){cancelAnimationFrame(o),l.value=!0,o=requestAnimationFrame(()=>{o=requestAnimationFrame(()=>{l.value=!1})})}async function a(){await new Promise(f=>requestAnimationFrame(f)),await new Promise(f=>requestAnimationFrame(f)),await new Promise(f=>requestAnimationFrame(f)),await new Promise(f=>{if(l.value){const c=Z(l,()=>{c(),f()})}else f()})}async function b(f){var v,h;if(f.key==="Tab"&&((v=t.value)==null||v.focus()),!["PageDown","PageUp","Home","End"].includes(f.key))return;const c=(h=e.value)==null?void 0:h.$el;if(!c)return;(f.key==="Home"||f.key==="End")&&c.scrollTo({top:f.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await a();const _=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(f.key==="PageDown"||f.key==="Home"){const u=c.getBoundingClientRect().top;for(const w of _)if(w.getBoundingClientRect().top>=u){w.focus();break}}else{const u=c.getBoundingClientRect().bottom;for(const w of[..._].reverse())if(w.getBoundingClientRect().bottom<=u){w.focus();break}}}return{onScrollPassive:i,onKeydown:b}}const _l=de({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Tl,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Al({itemChildren:!1})},"Select"),lt=de({..._l(),...nl(hl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...sl({transition:{component:Ml}})},"VSelect");Le()({name:"VSelect",props:lt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:l}=t;const{t:o}=ol(),i=ee(),a=ee(),b=ee(),f=ye(e,"menu"),c=R({get:()=>f.value,set:d=>{var r;f.value&&!d&&((r=a.value)==null?void 0:r.\u03A8openChildren.size)||(f.value=d)}}),{items:_,transformIn:v,transformOut:h}=rl(e),u=ye(e,"modelValue",[],d=>v(d===null?[null]:Ae(d)),d=>{var m;const r=h(d);return e.multiple?r:(m=r[0])!=null?m:null}),w=R(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:u.value.length),E=bl(e),x=R(()=>u.value.map(d=>d.value)),S=U(!1),F=R(()=>c.value?e.closeText:e.openText);let O="",H;const y=R(()=>e.hideSelected?_.value.filter(d=>!u.value.some(r=>(e.valueComparator||De)(r,d))):_.value),g=R(()=>e.hideNoData&&!y.value.length||E.isReadonly.value||E.isDisabled.value),be=R(()=>{var d;return{...e.menuProps,activatorProps:{...((d=e.menuProps)==null?void 0:d.activatorProps)||{},"aria-haspopup":"listbox"}}}),L=ee(),ae=pl(L,i);function ie(d){e.openOnClear&&(c.value=!0)}function K(){g.value||(c.value=!c.value)}function J(d){Me(d)&&X(d)}function X(d){var M,C;if(!d.key||E.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(d.key)&&d.preventDefault(),["Enter","ArrowDown"," "].includes(d.key)&&(c.value=!0),["Escape","Tab"].includes(d.key)&&(c.value=!1),d.key==="Home"?(M=L.value)==null||M.focus("first"):d.key==="End"&&((C=L.value)==null||C.focus("last"));const r=1e3;if(!Me(d))return;const m=performance.now();m-H>r&&(O=""),O+=d.key.toLowerCase(),H=m;const A=_.value.find(P=>P.title.toLowerCase().startsWith(O));if(A!==void 0){u.value=[A];const P=y.value.indexOf(A);Pe&&window.requestAnimationFrame(()=>{var $;P>=0&&(($=b.value)==null||$.scrollToIndex(P))})}}function ne(d){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!d.props.disabled)if(e.multiple){const m=u.value.findIndex(M=>(e.valueComparator||De)(M.value,d.value)),A=r==null?!~m:r;if(~m){const M=A?[...u.value,d]:[...u.value];M.splice(m,1),u.value=M}else A&&(u.value=[...u.value,d])}else{const m=r!==!1;u.value=m?[d]:[],Fe(()=>{c.value=!1})}}function se(d){var r;(r=L.value)!=null&&r.$el.contains(d.relatedTarget)||(c.value=!1)}function oe(){var d;e.eager&&((d=b.value)==null||d.calculateVisibleItems())}function j(){var d;S.value&&((d=i.value)==null||d.focus())}function me(d){S.value=!0}function ve(d){if(d==null)u.value=[];else if(Be(i.value,":autofill")||Be(i.value,":-webkit-autofill")){const r=_.value.find(m=>m.title===d);r&&ne(r)}else i.value&&(i.value.value="")}return Z(c,()=>{if(!e.hideSelected&&c.value&&u.value.length){const d=y.value.findIndex(r=>u.value.some(m=>(e.valueComparator||De)(m.value,r.value)));Pe&&window.requestAnimationFrame(()=>{var r;d>=0&&((r=b.value)==null||r.scrollToIndex(d))})}}),Z(()=>e.items,(d,r)=>{c.value||S.value&&!r.length&&d.length&&(c.value=!0)}),Oe(()=>{const d=!!(e.chips||l.chip),r=!!(!e.hideNoData||y.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),m=u.value.length>0,A=Re.filterProps(e),M=m||!S.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return s(Re,Q({ref:i},A,{modelValue:u.value.map(C=>C.props.value).join(", "),"onUpdate:modelValue":ve,focused:S.value,"onUpdate:focused":C=>S.value=C,validationValue:u.externalValue,counterValue:w.value,dirty:m,class:["v-select",{"v-select--active-menu":c.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:M,"onClick:clear":ie,"onMousedown:control":K,onBlur:se,onKeydown:X,"aria-label":o(F.value),title:o(F.value)}),{...l,default:()=>s(N,null,[s(ul,Q({ref:a,modelValue:c.value,"onUpdate:modelValue":C=>c.value=C,activator:"parent",contentClass:"v-select__content",disabled:g.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:oe,onAfterLeave:j},be.value),{default:()=>{var C;return[r&&s(qe,Q({ref:L,selected:x.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:P=>P.preventDefault(),onKeydown:J,onFocusin:me,tabindex:"-1","aria-live":"polite",color:(C=e.itemColor)!=null?C:e.color},ae,e.listProps),{default:()=>{var P,$,Y,re;return[(P=l["prepend-item"])==null?void 0:P.call(l),!y.value.length&&!e.hideNoData&&((Y=($=l["no-data"])==null?void 0:$.call(l))!=null?Y:s(ke,{key:"no-data",title:o(e.noDataText)},null)),s(gl,{ref:b,renderless:!0,items:y.value},{default:G=>{var k,D;let{item:V,index:n,itemRef:p}=G;const I=Q(V.props,{ref:p,key:V.value,onClick:()=>ne(V,null)});return(D=(k=l.item)==null?void 0:k.call(l,{item:V,index:n,props:I}))!=null?D:s(ke,Q(I,{role:"option"}),{prepend:z=>{let{isSelected:B}=z;return s(N,null,[e.multiple&&!e.hideSelected?s(ml,{key:V.value,modelValue:B,ripple:!1,tabindex:"-1"},null):void 0,V.props.prependAvatar&&s(cl,{image:V.props.prependAvatar},null),V.props.prependIcon&&s(Te,{icon:V.props.prependIcon},null)])}})}}),(re=l["append-item"])==null?void 0:re.call(l)]}})]}}),u.value.map((C,P)=>{function $(V){V.stopPropagation(),V.preventDefault(),ne(C,!1)}const Y={"onClick:close":$,onKeydown(V){V.key!=="Enter"&&V.key!==" "||(V.preventDefault(),V.stopPropagation(),$(V))},onMousedown(V){V.preventDefault(),V.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},re=d?!!l.chip:!!l.selection,G=re?dl(d?l.chip({item:C,index:P,props:Y}):l.selection({item:C,index:P})):void 0;if(!(re&&!G))return s("div",{key:C.value,class:"v-select__selection"},[d?l.chip?s(vl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:C.title}}},{default:()=>[G]}):s(We,Q({key:"chip",closable:e.closableChips,size:"small",text:C.title,disabled:C.props.disabled},Y),null):G!=null?G:s("span",{class:"v-select__selection-text"},[C.title,e.multiple&&P<u.value.length-1&&s("span",{class:"v-select__selection-comma"},[he(",")])])])})]),"append-inner":function(){var Y;for(var C=arguments.length,P=new Array(C),$=0;$<C;$++)P[$]=arguments[$];return s(N,null,[(Y=l["append-inner"])==null?void 0:Y.call(l,...P),e.menuIcon?s(Te,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),fl({isFocused:S,menu:c,select:ne},i)}});const tt=(e,t,l)=>e==null||t==null?-1:e.toString().toLocaleLowerCase().indexOf(t.toString().toLocaleLowerCase()),at=de({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function it(e,t,l){var f,c,_;const o=[],i=(f=l==null?void 0:l.default)!=null?f:tt,a=l!=null&&l.filterKeys?Ae(l.filterKeys):!1,b=Object.keys((c=l==null?void 0:l.customKeyFilter)!=null?c:{}).length;if(!(e!=null&&e.length))return o;e:for(let v=0;v<e.length;v++){const[h,u=h]=Ae(e[v]),w={},E={};let x=-1;if((t||b>0)&&!(l!=null&&l.noFilter)){if(typeof h=="object"){const O=a||Object.keys(u);for(const H of O){const y=Bl(u,H),g=(_=l==null?void 0:l.customKeyFilter)==null?void 0:_[H];if(x=g?g(y,t,h):i(y,t,h),x!==-1&&x!==!1)g?w[H]=x:E[H]=x;else if((l==null?void 0:l.filterMode)==="every")continue e}}else x=i(h,t,h),x!==-1&&x!==!1&&(E.title=x);const S=Object.keys(E).length,F=Object.keys(w).length;if(!S&&!F||(l==null?void 0:l.filterMode)==="union"&&F!==b&&!S||(l==null?void 0:l.filterMode)==="intersection"&&(F!==b||!S))continue}o.push({index:v,matches:{...E,...w}})}return o}function nt(e,t,l,o){const i=U([]),a=U(new Map),b=R(()=>o!=null&&o.transform?ge(t).map(c=>[c,o.transform(c)]):ge(t));je(()=>{const c=typeof l=="function"?l():ge(l),_=typeof c!="string"&&typeof c!="number"?"":String(c),v=it(b.value,_,{customKeyFilter:{...e.customKeyFilter,...ge(o==null?void 0:o.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),h=ge(t),u=[],w=new Map;v.forEach(E=>{let{index:x,matches:S}=E;const F=h[x];u.push(F),w.set(F.value,S)}),i.value=u,a.value=w});function f(c){return a.value.get(c.value)}return{filteredItems:i,filteredMatches:a,getMatches:f}}function st(e,t,l){if(t==null)return e;if(Array.isArray(t))throw new Error("Multiple matches is not implemented");return typeof t=="number"&&~t?s(N,null,[s("span",{class:"v-autocomplete__unmask"},[e.substr(0,t)]),s("span",{class:"v-autocomplete__mask"},[e.substr(t,l)]),s("span",{class:"v-autocomplete__unmask"},[e.substr(t+l)])]):e}const ot=de({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...at({filterKeys:["title"]}),..._l(),...nl(hl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...sl({transition:!1})},"VAutocomplete"),Ie=Le()({name:"VAutocomplete",props:ot(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:l}=t;const{t:o}=ol(),i=ee(),a=U(!1),b=U(!0),f=U(!1),c=ee(),_=ee(),v=ye(e,"menu"),h=R({get:()=>v.value,set:n=>{var p;v.value&&!n&&((p=c.value)==null?void 0:p.\u03A8openChildren.size)||(v.value=n)}}),u=U(-1),w=R(()=>{var n;return(n=i.value)==null?void 0:n.color}),E=R(()=>h.value?e.closeText:e.openText),{items:x,transformIn:S,transformOut:F}=rl(e),{textColorClasses:O,textColorStyles:H}=Rl(w),y=ye(e,"search",""),g=ye(e,"modelValue",[],n=>S(n===null?[null]:Ae(n)),n=>{var I;const p=F(n);return e.multiple?p:(I=p[0])!=null?I:null}),be=R(()=>typeof e.counterValue=="function"?e.counterValue(g.value):typeof e.counterValue=="number"?e.counterValue:g.value.length),L=bl(e),{filteredItems:ae,getMatches:ie}=nt(e,x,()=>b.value?"":y.value),K=R(()=>e.hideSelected?ae.value.filter(n=>!g.value.some(p=>p.value===n.value)):ae.value),J=R(()=>!!(e.chips||l.chip)),X=R(()=>J.value||!!l.selection),ne=R(()=>g.value.map(n=>n.props.value)),se=R(()=>{var p;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&y.value===((p=K.value[0])==null?void 0:p.title))&&K.value.length>0&&!b.value&&!f.value}),oe=R(()=>e.hideNoData&&!K.value.length||L.isReadonly.value||L.isDisabled.value),j=ee(),me=pl(j,i);function ve(n){e.openOnClear&&(h.value=!0),y.value=""}function d(){oe.value||(h.value=!0)}function r(n){oe.value||(a.value&&(n.preventDefault(),n.stopPropagation()),h.value=!h.value)}function m(n){var p;n.key!==" "&&Me(n)&&((p=i.value)==null||p.focus())}function A(n){var k,D,z;if(L.isReadonly.value)return;const p=i.value.selectionStart,I=g.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(n.key)&&n.preventDefault(),["Enter","ArrowDown"].includes(n.key)&&(h.value=!0),["Escape"].includes(n.key)&&(h.value=!1),se.value&&["Enter","Tab"].includes(n.key)&&!g.value.some(B=>{let{value:ue}=B;return ue===K.value[0].value})&&V(K.value[0]),n.key==="ArrowDown"&&se.value&&((k=j.value)==null||k.focus("next")),["Backspace","Delete"].includes(n.key)){if(!e.multiple&&X.value&&g.value.length>0&&!y.value)return V(g.value[0],!1);if(~u.value){n.preventDefault();const B=u.value;V(g.value[u.value],!1),u.value=B>=I-1?I-2:B}else n.key==="Backspace"&&!y.value&&(u.value=I-1);return}if(!!e.multiple)if(n.key==="ArrowLeft"){if(u.value<0&&p>0)return;const B=u.value>-1?u.value-1:I-1;g.value[B]?u.value=B:(u.value=-1,i.value.setSelectionRange((D=y.value)==null?void 0:D.length,(z=y.value)==null?void 0:z.length))}else if(n.key==="ArrowRight"){if(u.value<0)return;const B=u.value+1;g.value[B]?u.value=B:(u.value=-1,i.value.setSelectionRange(0,0))}else~u.value&&Me(n)&&(u.value=-1)}function M(n){if(Be(i.value,":autofill")||Be(i.value,":-webkit-autofill")){const p=x.value.find(I=>I.title===n.target.value);p&&V(p)}}function C(){var n;e.eager&&((n=_.value)==null||n.calculateVisibleItems())}function P(){var n;a.value&&(b.value=!0,(n=i.value)==null||n.focus())}function $(n){a.value=!0,setTimeout(()=>{f.value=!0})}function Y(n){f.value=!1}function re(n){(n==null||n===""&&!e.multiple&&!X.value)&&(g.value=[])}const G=U(!1);function V(n){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!n||n.props.disabled))if(e.multiple){const I=g.value.findIndex(D=>(e.valueComparator||De)(D.value,n.value)),k=p==null?!~I:p;if(~I){const D=k?[...g.value,n]:[...g.value];D.splice(I,1),g.value=D}else k&&(g.value=[...g.value,n]);e.clearOnSelect&&(y.value="")}else{const I=p!==!1;g.value=I?[n]:[],y.value=I&&!X.value?n.title:"",Fe(()=>{h.value=!1,b.value=!0})}}return Z(a,(n,p)=>{var I,k;n!==p&&(n?(G.value=!0,y.value=e.multiple||X.value?"":String((k=(I=g.value.at(-1))==null?void 0:I.props.title)!=null?k:""),b.value=!0,Fe(()=>G.value=!1)):(!e.multiple&&y.value==null&&(g.value=[]),h.value=!1,g.value.some(D=>{let{title:z}=D;return z===y.value})||(y.value=""),u.value=-1))}),Z(y,n=>{!a.value||G.value||(n&&(h.value=!0),b.value=!n)}),Z(h,()=>{if(!e.hideSelected&&h.value&&g.value.length){const n=K.value.findIndex(p=>g.value.some(I=>p.value===I.value));Pe&&window.requestAnimationFrame(()=>{var p;n>=0&&((p=_.value)==null||p.scrollToIndex(n))})}}),Z(()=>e.items,(n,p)=>{h.value||a.value&&!p.length&&n.length&&(h.value=!0)}),Oe(()=>{const n=!!(!e.hideNoData||K.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),p=g.value.length>0,I=Re.filterProps(e);return s(Re,Q({ref:i},I,{modelValue:y.value,"onUpdate:modelValue":[k=>y.value=k,re],focused:a.value,"onUpdate:focused":k=>a.value=k,validationValue:g.externalValue,counterValue:be.value,dirty:p,onChange:M,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":h.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!X.value,"v-autocomplete--selecting-index":u.value>-1},e.class],style:e.style,readonly:L.isReadonly.value,placeholder:p?void 0:e.placeholder,"onClick:clear":ve,"onMousedown:control":d,onKeydown:A}),{...l,default:()=>s(N,null,[s(ul,Q({ref:c,modelValue:h.value,"onUpdate:modelValue":k=>h.value=k,activator:"parent",contentClass:"v-autocomplete__content",disabled:oe.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:C,onAfterLeave:P},e.menuProps),{default:()=>{var k;return[n&&s(qe,Q({ref:j,selected:ne.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:D=>D.preventDefault(),onKeydown:m,onFocusin:$,onFocusout:Y,tabindex:"-1","aria-live":"polite",color:(k=e.itemColor)!=null?k:e.color},me,e.listProps),{default:()=>{var D,z,B,ue;return[(D=l["prepend-item"])==null?void 0:D.call(l),!K.value.length&&!e.hideNoData&&((B=(z=l["no-data"])==null?void 0:z.call(l))!=null?B:s(ke,{key:"no-data",title:o(e.noDataText)},null)),s(gl,{ref:_,renderless:!0,items:K.value},{default:ce=>{var Ye,Ge;let{item:T,index:Qe,itemRef:yl}=ce;const Xe=Q(T.props,{ref:yl,key:T.value,active:se.value&&Qe===0?!0:void 0,onClick:()=>V(T,null)});return(Ge=(Ye=l.item)==null?void 0:Ye.call(l,{item:T,index:Qe,props:Xe}))!=null?Ge:s(ke,Q(Xe,{role:"option"}),{prepend:we=>{let{isSelected:Ve}=we;return s(N,null,[e.multiple&&!e.hideSelected?s(ml,{key:T.value,modelValue:Ve,ripple:!1,tabindex:"-1"},null):void 0,T.props.prependAvatar&&s(cl,{image:T.props.prependAvatar},null),T.props.prependIcon&&s(Te,{icon:T.props.prependIcon},null)])},title:()=>{var we,Ve,Ze;return b.value?T.title:st(T.title,(we=ie(T))==null?void 0:we.title,(Ze=(Ve=y.value)==null?void 0:Ve.length)!=null?Ze:0)}})}}),(ue=l["append-item"])==null?void 0:ue.call(l)]}})]}}),g.value.map((k,D)=>{function z(T){T.stopPropagation(),T.preventDefault(),V(k,!1)}const B={"onClick:close":z,onKeydown(T){T.key!=="Enter"&&T.key!==" "||(T.preventDefault(),T.stopPropagation(),z(T))},onMousedown(T){T.preventDefault(),T.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ue=J.value?!!l.chip:!!l.selection,ce=ue?dl(J.value?l.chip({item:k,index:D,props:B}):l.selection({item:k,index:D})):void 0;if(!(ue&&!ce))return s("div",{key:k.value,class:["v-autocomplete__selection",D===u.value&&["v-autocomplete__selection--selected",O.value]],style:D===u.value?H.value:{}},[J.value?l.chip?s(vl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:k.title}}},{default:()=>[ce]}):s(We,Q({key:"chip",closable:e.closableChips,size:"small",text:k.title,disabled:k.props.disabled},B),null):ce!=null?ce:s("span",{class:"v-autocomplete__selection-text"},[k.title,e.multiple&&D<g.value.length-1&&s("span",{class:"v-autocomplete__selection-comma"},[he(",")])])])})]),"append-inner":function(){var B;for(var k=arguments.length,D=new Array(k),z=0;z<k;z++)D[z]=arguments[z];return s(N,null,[(B=l["append-inner"])==null?void 0:B.call(l,...D),e.menuIcon?s(Te,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:r,onClick:Ll,"aria-label":o(E.value),title:o(E.value),tabindex:"-1"},null):void 0])}})}),fl({isFocused:a,isPristine:b,menu:h,search:y,filteredItems:ae,select:V},i)}}),rt={name:"CollectionsModule",components:{LWindow:jl,Screen:ql,LScreenBtn:El},data:()=>({lang:null,loading:!1,loading_book:!1,loading_verses:!1,tab:null,width:0,height:0,bible:{id_bible_version:null,id_bible_book:null,version:null,book:null,chapter:null,verses:[]},select_bible:{id_bible_version:null,id_bible_book:null,version:null,book:null,chapter:null,verses:[],scriptural_reference:null,text:null},versions:[],books:[],verses:[],last_verse:1,last_bible_file:null}),computed:{module_id(){return Kl.id},module(){return this.$modules.get(this.module_id)},show(){return this.module.show},book(){return this.books.find(e=>e.id_bible_book==this.bible.id_bible_book)},version(){return this.versions.find(e=>e.id_bible_version==this.bible.id_bible_version)},chapters(){var e;return(e=this.book)==null?void 0:e.chapters},books_list(){return this.books.map(e=>({title:e.name,value:e.id_bible_book}))},chapters_list(){return Array.from({length:this.chapters},(e,t)=>t+1)},versions_list(){return this.versions.map(e=>({title:e.abbreviation+" - "+e.name,value:e.id_bible_version}))},compact:function(){return this.$vuetify.display.width<=750},super_compact:function(){return this.$vuetify.display.width<=400}},watch:{async show(){this.show&&this.lang!=this.$i18n.locale&&(this.versions=[],this.books=[],this.verses=[],this.bible={id_bible_version:null,id_bible_book:null,version:null,book:null,chapter:null,verses:[]},this.select_bible=Object.assign({},this.bible),await this.loadData())},async"bible.id_bible_book"(){await this.selBook()},async"bible.chapter"(){await this.selChapter()},async"bible.id_bible_version"(){await this.selVersion()},select_bible(){this.send("scriptural_reference",this.select_bible.scriptural_reference),this.send("text",this.select_bible.text)}},methods:{t(e){return this.$t(`modules.${this.module_id}.${e}`)},send(e,t){this.$appdata.set(`modules.${this.module_id}.data.${e}`,t)},async loadData(){this.loading=!0,this.books.length<=0&&(this.loading_book=!0,this.books=await this.$database.get(`${this.$i18n.locale}_bible_book`),this.bible.id_bible_book||await this.selBook(this.books[0].id_bible_book),this.loading_book=!1),this.versions.length<=0&&(this.versions=await this.$database.get(`${this.$i18n.locale}_bible_version`),this.bible.id_bible_version||await this.selVersion(this.versions[0].id_bible_version));const e=`bible_${this.bible.id_bible_version}_${this.bible.id_bible_book}_${this.bible.chapter}`;e!=this.last_bible_file&&(this.loading_verses=!0,this.verses={},this.verses=await this.$database.get(e),this.last_bible_file=e,this.loading_verses=!1),this.select_bible.id_bible_book==this.bible.id_bible_book&&this.select_bible.chapter==this.bible.chapter&&this.select_bible.id_bible_version==this.bible.id_bible_version&&(this.bible.verses=this.select_bible.verses),this.lang=this.$i18n.locale,this.loading=!1},resize(e){this.width=e.container_width,this.height=e.container_height},async selVersion(e){var t;e&&(this.bible.id_bible_version=e),this.bible.version=(t=this.version)==null?void 0:t.abbreviation,this.bible.verses=[],this.last_verse=1,await this.loadData()},async selBook(e){e&&(this.bible.id_bible_book=e),this.bible.book=this.book.name,this.bible.verses=[],this.last_verse=1,this.bible.chapter?this.bible.chapter>this.book.chapters?this.selChapter(this.book.chapters):await this.loadData():this.selChapter(1);const t=document.getElementById(`listBook_${e}`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})},async selChapter(e){e&&(this.bible.chapter=e),this.bible.verses=[],this.last_verse=1,await this.loadData();const t=document.getElementById(`listChapter_${e}`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})},async selVerse(e,t){if(e&&e.preventDefault(),t=parseInt(t),isNaN(t))return;if(e!=null&&e.ctrlKey){const o=this.bible.verses.indexOf(t);o===-1?this.bible.verses.push(t):this.bible.verses.splice(o,1)}else if(e!=null&&e.shiftKey){const o=Math.min(t,this.last_verse),i=Math.max(t,this.last_verse);for(let a=o;a<=i;a++)this.bible.verses.includes(a)||this.bible.verses.push(a)}else this.bible.verses=[t];this.last_verse=t,this.bible.verses.sort((o,i)=>o-i),this.select_bible=Object.assign({},this.bible),this.select_bible.scriptural_reference=this.scripturalReference(this.select_bible),this.select_bible.text=this.getSelectedVerses(this.select_bible.verses);const l=document.getElementById(`listVerse_${this.last_verse}`);l&&l.scrollIntoView({behavior:"smooth",block:"center"})},async prevVerse(){var e,t,l,o;if((e=this.select_bible)!=null&&e.id_bible_version&&await this.selVersion(this.select_bible.id_bible_version),(t=this.select_bible)!=null&&t.id_bible_book&&await this.selBook(this.select_bible.id_bible_book),(l=this.select_bible)!=null&&l.chapter&&await this.selChapter(this.select_bible.chapter),((o=this.select_bible)==null?void 0:o.verses)&&this.select_bible.verses.length>0){let i=Math.min(...this.select_bible.verses.filter(a=>a>0));if(i>1)i--;else if(this.select_bible.chapter>1)await this.selChapter(this.select_bible.chapter-1),i=Math.max(...Object.keys(this.verses).map(Number));else{let a=this.books.findIndex(f=>f.id_bible_book==this.bible.id_bible_book);const b=a>0?this.books[a-1]:this.books[this.books.length-1];await this.selBook(b.id_bible_book),await this.selChapter(b.chapters),i=Math.max(...Object.keys(this.verses).map(Number))}this.selVerse(null,i)}},async nextVerse(){var e,t,l,o;if((e=this.select_bible)!=null&&e.id_bible_version&&await this.selVersion(this.select_bible.id_bible_version),(t=this.select_bible)!=null&&t.id_bible_book&&await this.selBook(this.select_bible.id_bible_book),(l=this.select_bible)!=null&&l.chapter&&await this.selChapter(this.select_bible.chapter),((o=this.select_bible)==null?void 0:o.verses)&&this.select_bible.verses.length>0){let i=Math.max(...this.select_bible.verses);const a=Math.max(...Object.keys(this.verses).map(Number)),b=this.book.chapters;if(i<a)i++;else if(this.select_bible.chapter<b)await this.selChapter(this.select_bible.chapter+1),i=1;else{let f=this.books.findIndex(_=>_.id_bible_book==this.bible.id_bible_book);const c=f<this.books.length-1?this.books[f+1]:this.books[0];await this.selBook(c.id_bible_book),await this.selChapter(1),i=1}this.selVerse(null,i)}},numbersInterval(e){if(!e||e.length===0)return"";e.sort((i,a)=>i-a);let t=[],l=e[0],o=e[0];for(let i=1;i<=e.length;i++)e[i]===o+1||(l===o?t.push(`${l}`):t.push(`${l}-${o}`),l=e[i]),o=e[i];return t.join(", ")},scripturalReference(e){const t=this.numbersInterval(e.verses);return!e.book||!e.version?"":(e.book+" "+e.chapter+(t?`:${t}`:"")+(e.version?` (${e.version})`:"")).trim()},getSelectedVerses(e){e.sort((o,i)=>o-i);let t="",l=null;return e.forEach(o=>{l!==null&&o-l>1?t+=" [...] ":t&&(t+=" "),t+=this.verses[o],l=o}),t},clean:function(){this.bible.verses=[],this.select_bible={id_bible_version:null,id_bible_book:null,version:null,book:null,chapter:null,verses:[],scriptural_reference:null,text:null}},close(){this.$popup.exit(),this.bible.verses=[],this.select_bible={id_bible_version:null,id_bible_book:null,version:null,book:null,chapter:null,verses:[],scriptural_reference:null,text:null}}},async mounted(){await this.loadData()}},ut={key:1},ct={key:0,class:"d-flex flex-row h-100"},dt={class:"w-70 h-100"},vt={class:"w-30 h-100"},ft={class:"d-flex flex-row h-100"},ht={key:0,style:{height:"40px"}},bt=["innerHTML"],mt={style:{height:"48px"}};function gt(e,t,l,o,i,a){const b=Ke("LScreenBtn"),f=Ke("Screen"),c=Ke("l-window"),_=$l("shortkey");return q(),xe(c,{modelValue:a.module.show,"onUpdate:modelValue":t[10]||(t[10]=v=>a.module.show=v),title:a.t("title"),icon:a.module.icon,closable:"",minimizable:"",compact:"",onClose:t[11]||(t[11]=v=>{a.close(),e.$modules.close(a.module_id)}),onMinimize:t[12]||(t[12]=v=>e.$modules.minimize(a.module_id)),onResize:a.resize,"slot-left-style":{width:a.compact?0:e.width/100*60+"px"},"slot-right-style":{width:a.compact?e.width:e.width/100*40+"px"},index:e.loading},{header:W(()=>[a.compact?(q(),le("div",{key:0,class:zl({"d-flex":!a.super_compact})},[s(Ie,{modelValue:e.bible.id_bible_book,"onUpdate:modelValue":t[0]||(t[0]=v=>e.bible.id_bible_book=v),items:a.books_list,"hide-details":"",density:"compact",variant:"plain","min-width":"30%"},null,8,["modelValue","items"]),s(Ie,{modelValue:e.bible.chapter,"onUpdate:modelValue":t[1]||(t[1]=v=>e.bible.chapter=v),items:a.chapters_list,"hide-details":"",density:"compact",variant:"plain","min-width":"20%"},null,8,["modelValue","items"]),s(Ie,{modelValue:e.bible.id_bible_version,"onUpdate:modelValue":t[2]||(t[2]=v=>e.bible.id_bible_version=v),items:a.versions_list,"hide-details":"",density:"compact",variant:"plain","min-width":"50%"},null,8,["modelValue","items"])],2)):(q(),le("span",ut,pe(a.scripturalReference(e.bible)),1))]),left:W(()=>[a.compact?ll("",!0):(q(),le("div",ct,[te("div",dt,[te("div",{style:Ce(`height: ${e.height}px`),class:"overflow-auto d-flex flex-row flex-wrap justify-center align-content-start"},[(q(),le(N,null,_e(10,v=>fe(s(He,{key:v,class:"ma-1",height:80,width:100}),[[$e,e.loading_book]])),64)),(q(!0),le(N,null,_e(e.books,v=>(q(),xe(Je,{key:v.id_bible_book,color:v.color,class:"ma-1 d-flex align-center flex-column",height:80,width:100,hover:"",variant:v.id_bible_book==e.bible.id_bible_book?"flat":"tonal",onClick:h=>a.selBook(v.id_bible_book),id:`listBook_${v.id_bible_book}`},{default:W(()=>[s(el,{class:"flex-grow-1 pa-0 ma-0 text-h4 d-flex align-center"},{default:W(()=>[he(pe(v.abbreviation),1)]),_:2},1024),s(Ul,{class:"flex-grow-0 pa-0 px-1 ma-0 text-caption text-truncate text-center w-100"},{default:W(()=>[he(pe(v.name),1)]),_:2},1024)]),_:2},1032,["color","variant","onClick","id"]))),128))],4)]),te("div",vt,[te("div",{style:Ce(`height: ${e.height}px`),class:"overflow-auto d-flex flex-row flex-wrap justify-center align-content-start"},[(q(),le(N,null,_e(10,v=>fe(s(He,{key:v,class:"ma-1",height:40,width:40}),[[$e,e.loading_book]])),64)),(q(!0),le(N,null,_e(a.chapters,v=>{var h;return q(),xe(Je,{key:v,color:(h=a.book)==null?void 0:h.color,class:"ma-1 d-flex align-center flex-column",height:40,width:40,hover:"",variant:v==e.bible.chapter?"flat":"tonal",onClick:u=>a.selChapter(v),id:`listChapter_${v}`},{default:W(()=>[s(el,{class:"flex-grow-1 pa-0 ma-0 d-flex align-center font-weight-regular",style:{"font-size":"16px"}},{default:W(()=>[he(pe(v),1)]),_:2},1024)]),_:2},1032,["color","variant","onClick","id"])}),128))],4)])]))]),right:W(()=>[te("div",ft,[te("div",{style:Ce({height:e.height+"px",width:(a.compact?e.width:e.width/100*40)+"px"})},[a.compact?ll("",!0):(q(),le("div",ht,[s(Ie,{modelValue:e.bible.id_bible_version,"onUpdate:modelValue":t[3]||(t[3]=v=>e.bible.id_bible_version=v),items:a.versions_list,"hide-details":"",density:"compact",variant:"underlined"},null,8,["modelValue","items"])])),te("div",{style:Ce(`height: ${e.height/2}px;`)},[fe(s(He,{type:"list-item-two-line"},null,512),[[$e,e.loading_book||e.loading_verses]]),s(qe,{class:"overflow h-100 ma-0 pa-0 no-select",width:"100%"},{default:W(()=>[(q(!0),le(N,null,_e(e.verses,(v,h)=>(q(),xe(ke,{key:h,link:"",variant:"flat",value:v,active:e.bible.verses.includes(+h),onClick:u=>a.selVerse(u,h),density:"compact",id:`listVerse_${h}`},{prepend:W(()=>[s(We,{class:"mr-2"},{default:W(()=>[he(pe(h),1)]),_:2},1024)]),default:W(()=>[te("div",{innerHTML:v,class:"text-caption"},null,8,bt)]),_:2},1032,["value","active","onClick","id"]))),128))]),_:1})],4),te("div",mt,[s(Hl,{density:"compact"},{default:W(()=>{var v,h,u;return[s(Nl),s(ze,{vertical:""}),fe(s(Ue,{disabled:!(((v=e.select_bible)==null?void 0:v.verses)&&e.select_bible.verses.length>0),variant:"text",size:"small",icon:"mdi-chevron-left ",onClick:t[4]||(t[4]=w=>a.prevVerse()),onShortkey:t[5]||(t[5]=w=>a.prevVerse())},null,8,["disabled"]),[[_,["arrowleft"]]]),fe(s(Ue,{disabled:!(((h=e.select_bible)==null?void 0:h.verses)&&e.select_bible.verses.length>0),variant:"text",size:"small",icon:"mdi-chevron-right ",onClick:t[6]||(t[6]=w=>a.nextVerse()),onShortkey:t[7]||(t[7]=w=>a.nextVerse())},null,8,["disabled"]),[[_,["arrowright"]]]),s(ze,{vertical:""}),fe(s(Ue,{disabled:!(((u=e.select_bible)==null?void 0:u.verses)&&e.select_bible.verses.length>0),variant:"text",size:"small",icon:"mdi-eraser",onClick:t[8]||(t[8]=w=>a.clean()),onShortkey:t[9]||(t[9]=w=>a.clean())},null,8,["disabled"]),[[_,["del"]]]),s(ze,{vertical:""}),s(b,{module:"bible"})]}),_:1})]),s(f,{height:a.compact?e.height/2-48:e.height/2-88},null,8,["height"])],4)])]),_:1},8,["modelValue","title","icon","onResize","slot-left-style","slot-right-style","index"])}const Ct=Ol(rt,[["render",gt]]);export{Ct as default};
